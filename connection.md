# параметры соединеня с базой данных MongoDB

Параметр `readPreference` в строке подключения MongoDB позволяет указать, какой член набора реплик будет использоваться для операций чтения. Вот основные варианты, которые можно использовать для `readPreference`:

1. **`primary`** — (По умолчанию)
   - Все операции чтения будут направлены только к основному узлу (primary).
   - Используется для сценариев, когда требуется самая свежая версия данных.

2. **`primaryPreferred`**
   - Основное чтение будет направлено к `primary`, если он доступен.
   - В случае, если основной узел недоступен, чтение будет перенаправлено к одному из вторичных узлов (secondary).
   - Подходит для случаев, когда предпочтение отдается консистентности данных, но допустимо чтение с `secondary` в условиях отказа основного узла.

3. **`secondary`**
   - Все операции чтения направляются исключительно на вторичные узлы (secondary).
   - Подходит для распределения нагрузки чтения или если основное чтение с primary не критично для целостности данных.

4. **`secondaryPreferred`**
   - Предпочитает чтение с `secondary` узлов, если они доступны.
   - Если ни один `secondary` узел недоступен, операции чтения направляются на `primary`.
   - Полезно для снижения нагрузки на основной узел или для географически распределенных реплик.

5. **`nearest`**
   - Чтение направляется к узлу, который имеет наименьшую задержку, независимо от того, является ли он primary или secondary.
   - Используется в ситуациях, когда приоритет отдается минимальной задержке чтения, например, в географически распределенных системах.

### Резюме:

| Значение              | Описание                                                              |
|-----------------------|----------------------------------------------------------------------|
| `primary`             | Чтение только с основного узла (primary).                            |
| `primaryPreferred`    | Чтение с primary, но допускается чтение с secondary в случае недоступности primary. |
| `secondary`           | Чтение только с вторичных узлов (secondary).                         |
| `secondaryPreferred`  | Чтение с secondary, но допускается чтение с primary, если secondary недоступен. |
| `nearest`             | Чтение с узла, ближайшего по задержке (не зависит от роли узла).     |

### Пример использования:
Если вы хотите настроить `readPreference` на чтение с ближайшего узла, строка подключения будет выглядеть следующим образом:

```plaintext
mongodb://root:root@localhost:27017,localhost:27018,localhost:27019/frameworkSession?authSource=admin&replicaSet=rs0&readPreference=nearest
```

Использование разных `readPreference` помогает балансировать нагрузку и поддерживать отказоустойчивость, в зависимости от потребностей приложения.